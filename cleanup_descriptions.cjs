const fs = require('fs');
const db = JSON.parse(fs.readFileSync('public/data/nikke_db.json', 'utf8'));

const updates = {
    "514": `【최적 콘텐츠: SG(샷건) 덱 보조 및 PVE 생존 지원】
- 아군 전체에게 보호막을 제공하여 버스트 사이클 중 생존력을 크게 높여주는 2버스트 서포터입니다.
- 상세 활용법: 특히 샷건 니케들과의 시너지가 좋으며, 적의 강력한 광역 공격이 예상되는 스테이지에서 방어적 변수를 창출합니다.
- 추천 조합: 토브, 소다: 트윙클링 바니 등 샷건 메타 니케들과 조합하여 시너지를 극대화합니다.`,

    "400": `【최적 콘텐츠: 풍압 코드 약점 보스 및 샷건 특화 콘텐츠】
- 아군 딜러의 공격력을 복사하여 자신의 화력으로 전환하는 독특한 메커니즘을 가진 최상위권 2버스트 전용 딜러입니다.
- 상세 활용법: 성장도가 높은 아군의 공격력을 기반으로 하기 때문에 육성 대비 효율이 매우 뛰어납니다. 20초의 짧은 버스트 쿨타임으로 지속적인 폭딜이 가능합니다.
- 추천 조합: 토브, 소다 등 샷건 버퍼나 홍련, 모더니아 등 기본 공격력이 높은 유닛과 함께 사용합니다.`,

    "212": `【최적 콘텐츠: 보스전 및 솔로 레이드 서브 딜링】
- 적에게 받는 대미지 증가 디버프를 중첩시켜 팀 전체의 화력을 보조하는 테크니컬한 2버스트 니케입니다.
- 상세 활용법: 디버프가 중첩될수록 효율이 올라가므로 단기전보다는 장기전 보스 공략에 적합합니다. 특정 레이드 환경에서 서브 딜러 겸 디버퍼로 활약합니다.
- 추천 조합: 리타, 도로시 등 1버스트 쿨감 요원과 센티/길티 등 화력형 2버스트와 함께 기용됩니다.`,

    "232": `【최적 콘텐츠: PVP 아레나 필창 및 특정 무적 파훼 보스】
- 아레나에서 상대의 강력한 한방(홍련 등)을 '무적'으로 막아내는 현역 1티어 PVP 니케입니다.
- 상세 활용법: 버스트 사용 시 짧은 시간 동안 팀 전체를 무적으로 만들어 생존력을 극대화합니다. 런처 특유의 빠른 버스트 충전 속도를 활용해 아레나 선제권을 가져옵니다.
- 추천 조합: 비스킷, 도라 등과 함께 아레나 방어 혹은 공격 덱의 핵심으로 사용됩니다.`,

    "261": `【최적 콘텐츠: 솔로 레이드 및 전격/수냉 약점 공략】
- 넓은 범위를 커버하는 2버스트 화력형 필그림으로, 특정 코드 약점 환경에서 메인 딜러급 활약을 합니다.
- 상세 활용법: 2버스트 슬롯에서 딜링 기여도가 매우 높으며, 파츠가 많은 보스전에서 광역 딜러로서의 면모를 유감없이 발휘합니다.
- 추천 조합: 헬름: 아쿠아마린, 누아르 등과 함께 레이드 특화 파티를 구성합니다.`,

    "72": `【최적 콘텐츠: 캠페인 초반 및 지속 대미지 보조】
- 도발과 자가 회복 능력을 바탕으로 아군의 생존을 돕는 방어 지향적 2버스트 니케입니다.
- 상세 활용법: 지속적인 대미지 누적 능력을 가지고 있어 장기전에서 서브 딜러 역할을 수행할 수 있습니다. 메타상으로는 다소 밀려있으나 특정 코드 환경에서 기용될 수 있습니다.
- 추천 조합: 길티 등 샷건 딜러나 폴리 등과 함께 2-2-3 구조에서 방어력을 강화하는 용도로 사용됩니다.`
};

let updatedCount = 0;
db.nikkes.forEach(n => {
    if (updates[n.id]) {
        n.desc = updates[n.id];
        updatedCount++;
        console.log(`Updated [${n.name}] (ID: ${n.id})`);
    } else if (n.desc && n.desc.startsWith('1스킬:')) {
        // General cleanup for the remaining "wrong" ones
        n.desc = `【캐릭터 활용 정보】\n- 이 니케는 ${n.class} ${n.weapon} 포지션으로, ${n.company} 소속 ${n.burst}버스트 유닛입니다.\n- 상세한 활용법 및 최신 메타 정보는 현재 수집 중입니다. 데이터 관리자를 통해 정보를 최신화할 수 있습니다.`;
        updatedCount++;
        console.log(`Cleaned up duplicated skill info for [${n.name}] (ID: ${n.id})`);
    }
});

db.meta.last_updated = new Date().toISOString();
fs.writeFileSync('public/data/nikke_db.json', JSON.stringify(db, null, 2));
console.log(`Successfully updated/cleaned ${updatedCount} Nikkes.`);
